
<!-- saved from url=(0066)https://userpages.umbc.edu/~cmarron/cs341.f19/projects/proj2.shtml -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"> 
   <title>
      Project 2: Range Average Query,
      CMSC 341 Projects &amp; Support Fall 2019
   </title> 
   <!-- <link rel="shortcut icon" href="../chang.ico"> -->
   <link rel="stylesheet" type="text/css" href="./Project 2_ Range Average Query, CMSC 341 Projects &amp; Support Fall 2019_files/style-graph.css">
   <script src="./Project 2_ Range Average Query, CMSC 341 Projects &amp; Support Fall 2019_files/latest.js.download" async=""></script>
<script type="text/javascript" async="" src="./Project 2_ Range Average Query, CMSC 341 Projects &amp; Support Fall 2019_files/MathJax.js.download"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover, .MJXp-munder {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > *, .MJXp-munder > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.mjx-chtml {display: inline-block; line-height: 0; text-indent: 0; text-align: left; text-transform: none; font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; letter-spacing: normal; word-wrap: normal; word-spacing: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; margin: 0; padding: 1px 0}
.MJXc-display {display: block; text-align: center; margin: 1em 0; padding: 0}
.mjx-chtml[tabindex]:focus, body :focus .mjx-chtml[tabindex] {display: inline-table}
.mjx-full-width {text-align: center; display: table-cell!important; width: 10000em}
.mjx-math {display: inline-block; border-collapse: separate; border-spacing: 0}
.mjx-math * {display: inline-block; -webkit-box-sizing: content-box!important; -moz-box-sizing: content-box!important; box-sizing: content-box!important; text-align: left}
.mjx-numerator {display: block; text-align: center}
.mjx-denominator {display: block; text-align: center}
.MJXc-stacked {height: 0; position: relative}
.MJXc-stacked > * {position: absolute}
.MJXc-bevelled > * {display: inline-block}
.mjx-stack {display: inline-block}
.mjx-op {display: block}
.mjx-under {display: table-cell}
.mjx-over {display: block}
.mjx-over > * {padding-left: 0px!important; padding-right: 0px!important}
.mjx-under > * {padding-left: 0px!important; padding-right: 0px!important}
.mjx-stack > .mjx-sup {display: block}
.mjx-stack > .mjx-sub {display: block}
.mjx-prestack > .mjx-presup {display: block}
.mjx-prestack > .mjx-presub {display: block}
.mjx-delim-h > .mjx-char {display: inline-block}
.mjx-surd {vertical-align: top}
.mjx-mphantom * {visibility: hidden}
.mjx-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 2px 3px; font-style: normal; font-size: 90%}
.mjx-annotation-xml {line-height: normal}
.mjx-menclose > svg {fill: none; stroke: currentColor}
.mjx-mtr {display: table-row}
.mjx-mlabeledtr {display: table-row}
.mjx-mtd {display: table-cell; text-align: center}
.mjx-label {display: table-row}
.mjx-box {display: inline-block}
.mjx-block {display: block}
.mjx-span {display: inline}
.mjx-char {display: block; white-space: pre}
.mjx-itable {display: inline-table; width: auto}
.mjx-row {display: table-row}
.mjx-cell {display: table-cell}
.mjx-table {display: table; width: 100%}
.mjx-line {display: block; height: 0}
.mjx-strut {width: 0; padding-top: 1em}
.mjx-vsize {width: 0}
.MJXc-space1 {margin-left: .167em}
.MJXc-space2 {margin-left: .222em}
.MJXc-space3 {margin-left: .278em}
.mjx-chartest {display: block; visibility: hidden; position: absolute; top: 0; line-height: normal; font-size: 500%}
.mjx-chartest .mjx-char {display: inline}
.mjx-chartest .mjx-box {padding-top: 1000px}
.MJXc-processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MJXc-processed {display: none}
.mjx-test {font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow: hidden; height: 1px}
.mjx-test.mjx-test-display {display: table!important}
.mjx-test.mjx-test-inline {display: inline!important; margin-right: -1px}
.mjx-test.mjx-test-default {display: block!important; clear: both}
.mjx-ex-box {display: inline-block!important; position: absolute; overflow: hidden; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0; width: 1px; height: 60ex}
.mjx-test-inline .mjx-left-box {display: inline-block; width: 0; float: left}
.mjx-test-inline .mjx-right-box {display: inline-block; width: 0; float: right}
.mjx-test-display .mjx-right-box {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
#MathJax_CHTML_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.mjx-chtml .mjx-noError {line-height: 1.2; vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
.MJXc-TeX-unknown-R {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: normal; font-weight: normal}
.MJXc-TeX-unknown-I {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: italic; font-weight: normal}
.MJXc-TeX-unknown-B {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: normal; font-weight: bold}
.MJXc-TeX-unknown-BI {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: italic; font-weight: bold}
.MJXc-TeX-ams-R {font-family: MJXc-TeX-ams-R,MJXc-TeX-ams-Rw}
.MJXc-TeX-cal-B {font-family: MJXc-TeX-cal-B,MJXc-TeX-cal-Bx,MJXc-TeX-cal-Bw}
.MJXc-TeX-frak-R {font-family: MJXc-TeX-frak-R,MJXc-TeX-frak-Rw}
.MJXc-TeX-frak-B {font-family: MJXc-TeX-frak-B,MJXc-TeX-frak-Bx,MJXc-TeX-frak-Bw}
.MJXc-TeX-math-BI {font-family: MJXc-TeX-math-BI,MJXc-TeX-math-BIx,MJXc-TeX-math-BIw}
.MJXc-TeX-sans-R {font-family: MJXc-TeX-sans-R,MJXc-TeX-sans-Rw}
.MJXc-TeX-sans-B {font-family: MJXc-TeX-sans-B,MJXc-TeX-sans-Bx,MJXc-TeX-sans-Bw}
.MJXc-TeX-sans-I {font-family: MJXc-TeX-sans-I,MJXc-TeX-sans-Ix,MJXc-TeX-sans-Iw}
.MJXc-TeX-script-R {font-family: MJXc-TeX-script-R,MJXc-TeX-script-Rw}
.MJXc-TeX-type-R {font-family: MJXc-TeX-type-R,MJXc-TeX-type-Rw}
.MJXc-TeX-cal-R {font-family: MJXc-TeX-cal-R,MJXc-TeX-cal-Rw}
.MJXc-TeX-main-B {font-family: MJXc-TeX-main-B,MJXc-TeX-main-Bx,MJXc-TeX-main-Bw}
.MJXc-TeX-main-I {font-family: MJXc-TeX-main-I,MJXc-TeX-main-Ix,MJXc-TeX-main-Iw}
.MJXc-TeX-main-R {font-family: MJXc-TeX-main-R,MJXc-TeX-main-Rw}
.MJXc-TeX-math-I {font-family: MJXc-TeX-math-I,MJXc-TeX-math-Ix,MJXc-TeX-math-Iw}
.MJXc-TeX-size1-R {font-family: MJXc-TeX-size1-R,MJXc-TeX-size1-Rw}
.MJXc-TeX-size2-R {font-family: MJXc-TeX-size2-R,MJXc-TeX-size2-Rw}
.MJXc-TeX-size3-R {font-family: MJXc-TeX-size3-R,MJXc-TeX-size3-Rw}
.MJXc-TeX-size4-R {font-family: MJXc-TeX-size4-R,MJXc-TeX-size4-Rw}
.MJXc-TeX-vec-R {font-family: MJXc-TeX-vec-R,MJXc-TeX-vec-Rw}
.MJXc-TeX-vec-B {font-family: MJXc-TeX-vec-B,MJXc-TeX-vec-Bx,MJXc-TeX-vec-Bw}
@font-face {font-family: MJXc-TeX-ams-R; src: local('MathJax_AMS'), local('MathJax_AMS-Regular')}
@font-face {font-family: MJXc-TeX-ams-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_AMS-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-cal-B; src: local('MathJax_Caligraphic Bold'), local('MathJax_Caligraphic-Bold')}
@font-face {font-family: MJXc-TeX-cal-Bx; src: local('MathJax_Caligraphic'); font-weight: bold}
@font-face {font-family: MJXc-TeX-cal-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-frak-R; src: local('MathJax_Fraktur'), local('MathJax_Fraktur-Regular')}
@font-face {font-family: MJXc-TeX-frak-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-frak-B; src: local('MathJax_Fraktur Bold'), local('MathJax_Fraktur-Bold')}
@font-face {font-family: MJXc-TeX-frak-Bx; src: local('MathJax_Fraktur'); font-weight: bold}
@font-face {font-family: MJXc-TeX-frak-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-math-BI; src: local('MathJax_Math BoldItalic'), local('MathJax_Math-BoldItalic')}
@font-face {font-family: MJXc-TeX-math-BIx; src: local('MathJax_Math'); font-weight: bold; font-style: italic}
@font-face {font-family: MJXc-TeX-math-BIw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Math-BoldItalic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Math-BoldItalic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Math-BoldItalic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-R; src: local('MathJax_SansSerif'), local('MathJax_SansSerif-Regular')}
@font-face {font-family: MJXc-TeX-sans-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-B; src: local('MathJax_SansSerif Bold'), local('MathJax_SansSerif-Bold')}
@font-face {font-family: MJXc-TeX-sans-Bx; src: local('MathJax_SansSerif'); font-weight: bold}
@font-face {font-family: MJXc-TeX-sans-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-I; src: local('MathJax_SansSerif Italic'), local('MathJax_SansSerif-Italic')}
@font-face {font-family: MJXc-TeX-sans-Ix; src: local('MathJax_SansSerif'); font-style: italic}
@font-face {font-family: MJXc-TeX-sans-Iw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Italic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-script-R; src: local('MathJax_Script'), local('MathJax_Script-Regular')}
@font-face {font-family: MJXc-TeX-script-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Script-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Script-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Script-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-type-R; src: local('MathJax_Typewriter'), local('MathJax_Typewriter-Regular')}
@font-face {font-family: MJXc-TeX-type-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Typewriter-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Typewriter-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Typewriter-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-cal-R; src: local('MathJax_Caligraphic'), local('MathJax_Caligraphic-Regular')}
@font-face {font-family: MJXc-TeX-cal-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-B; src: local('MathJax_Main Bold'), local('MathJax_Main-Bold')}
@font-face {font-family: MJXc-TeX-main-Bx; src: local('MathJax_Main'); font-weight: bold}
@font-face {font-family: MJXc-TeX-main-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Main-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-I; src: local('MathJax_Main Italic'), local('MathJax_Main-Italic')}
@font-face {font-family: MJXc-TeX-main-Ix; src: local('MathJax_Main'); font-style: italic}
@font-face {font-family: MJXc-TeX-main-Iw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Main-Italic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-R; src: local('MathJax_Main'), local('MathJax_Main-Regular')}
@font-face {font-family: MJXc-TeX-main-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Main-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-math-I; src: local('MathJax_Math Italic'), local('MathJax_Math-Italic')}
@font-face {font-family: MJXc-TeX-math-Ix; src: local('MathJax_Math'); font-style: italic}
@font-face {font-family: MJXc-TeX-math-Iw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Math-Italic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size1-R; src: local('MathJax_Size1'), local('MathJax_Size1-Regular')}
@font-face {font-family: MJXc-TeX-size1-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Size1-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size2-R; src: local('MathJax_Size2'), local('MathJax_Size2-Regular')}
@font-face {font-family: MJXc-TeX-size2-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Size2-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size3-R; src: local('MathJax_Size3'), local('MathJax_Size3-Regular')}
@font-face {font-family: MJXc-TeX-size3-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Size3-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size4-R; src: local('MathJax_Size4'), local('MathJax_Size4-Regular')}
@font-face {font-family: MJXc-TeX-size4-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Size4-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-vec-R; src: local('MathJax_Vector'), local('MathJax_Vector-Regular')}
@font-face {font-family: MJXc-TeX-vec-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Vector-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Vector-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Vector-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-vec-B; src: local('MathJax_Vector Bold'), local('MathJax_Vector-Bold')}
@font-face {font-family: MJXc-TeX-vec-Bx; src: local('MathJax_Vector'); font-weight: bold}
@font-face {font-family: MJXc-TeX-vec-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/eot/MathJax_Vector-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/woff/MathJax_Vector-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/fonts/HTML-CSS/TeX/otf/MathJax_Vector-Bold.otf') format('opentype')}
</style></head> 

<body><div id="MathJax_Message" style="display: none;"></div> 
    <div id="wrapper">
      <div id="header">
	<h1>CMSC 341 Data Structures — Projects &amp; Support — Fall 2019</h1>
        <div id="headerimg" class="donotprint"></div>
	<div id="nav" class="donotprint">
	  <ul>
	    <li><a href="https://userpages.umbc.edu/~cmarron/cs341.f19/">Home</a></li>
	    <li><a href="https://userpages.umbc.edu/~cmarron/cs341.f19/sections.shtml">Sections</a></li>
	    <!-- <li><a href="../syllabus.shtml">Syllabus</a></li> -->
	    <!-- <li><a href="../schedule.shtml">Schedule</a></li> -->
	    <!-- <li><a href="../homework/">Homework</a></li> -->
	    <li><a href="https://userpages.umbc.edu/~cmarron/cs341.f19/projects/">Projects</a></li>
	    <li><a href="https://userpages.umbc.edu/~cmarron/cs341.f19/staff/">TA Support</a></li>
	    <li><a href="https://userpages.umbc.edu/~cmarron/cs341.f19/resources/">Resources</a></li>
	    <li><a href="https://userpages.umbc.edu/~cmarron/cs341.f19/faq.shtml">FAQ</a></li>
	  </ul>
	</div>
     </div>
     <div id="content">

<!-- END HEADER -->




<h1>Project 2: Range Average Query</h1>

<h2>Due: Tuesday, October 8, before 9:00 pm</h2>

<hr>
<h2>Addenda</h2>

<ul>
  <li>
    You may find it easier to store sums (rather than averages) in the
    RAQ and BlockRAQ data structures.  If you choose to do this,
    your <tt>query()</tt> function must convert sums to averages.
    Also, your <tt>dump()</tt> function should print sums, not
    averages.
  </li>
  <li>
    You will need to include the <tt>cmath</tt> library
    in <tt>raq.cpp</tt> to use the <tt>sqrt()</tt> function. You may
    also include <tt>iostream</tt> (needed by <tt>dump()</tt>)
    and <tt>iomanip</tt> (optional, but allows for formatting of
    output).
  </li>
</ul>

<hr>
<h2>Objectives</h2>

<p>
  In this project, you will implement two different solutions for the
  Range Average Query problem, each with different asymptotic running
  times.
</p>
 
<hr>
<h2>Introduction</h2> 

<p>
 The <em>Range Average Query</em> problem (RAM) is very simple to
 state.  Let <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-1-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-1" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-2" class="mjx-mrow"><span id="MJXc-Node-3" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-1">A</script> be a numeric array of size <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-2-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-4" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-5" class="mjx-mrow"><span id="MJXc-Node-6" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">n</script>.  We wish to make
 numerous queries of the following type: given a pair of indices <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-3-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-7" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-8" class="mjx-mrow"><span id="MJXc-Node-9" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-10" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-11" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-12" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-13" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-3">(i,
 j)</script>, <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-4-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;&amp;#x2264;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;&amp;#x2264;&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-14" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-15" class="mjx-mrow"><span id="MJXc-Node-16" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span><span id="MJXc-Node-17" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.466em;">&#8804;</span></span><span id="MJXc-Node-18" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-19" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.466em;">&#8804;</span></span><span id="MJXc-Node-20" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-21" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.234em; padding-bottom: 0.408em;">&lt;</span></span><span id="MJXc-Node-22" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn><mo>&#8804;</mo><mi>i</mi><mo>&#8804;</mo><mi>j</mi><mo>&lt;</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-4">0 \leq i \leq j < n</script>, return the average
 <span class="MathJax_Preview" style="color: inherit;"></span><span class="mjx-chtml MJXc-display" style="text-align: center;"><span id="MathJax-Element-5-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mrow&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;munderover&gt;&lt;mo&gt;&amp;#x2211;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/munderover&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-23" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-24" class="mjx-mrow"><span id="MJXc-Node-25" class="mjx-mstyle"><span id="MJXc-Node-26" class="mjx-mrow"><span id="MJXc-Node-27" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-28" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-29" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-30" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-31" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-32" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-33" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-34" class="mjx-mfrac MJXc-space3"><span class="mjx-box MJXc-stacked" style="width: 3.902em; padding: 0px 0.12em;"><span class="mjx-numerator" style="width: 3.902em; top: -1.368em;"><span id="MJXc-Node-35" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span><span class="mjx-denominator" style="width: 3.902em; bottom: -0.915em;"><span id="MJXc-Node-36" class="mjx-mrow"><span id="MJXc-Node-37" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-38" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-39" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-40" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-41" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span></span><span class="mjx-line" style="border-bottom: 1.3px solid; top: -0.286em; width: 3.902em;"></span></span><span class="mjx-vsize" style="height: 2.282em; vertical-align: -0.915em;"></span></span><span id="MJXc-Node-42" class="mjx-munderover MJXc-space1"><span class="mjx-itable"><span class="mjx-row"><span class="mjx-cell"><span class="mjx-stack"><span class="mjx-over" style="font-size: 70.7%; padding-bottom: 0.157em; padding-top: 0.141em; padding-left: 0.815em;"><span id="MJXc-Node-49" class="mjx-texatom" style=""><span id="MJXc-Node-50" class="mjx-mrow"><span id="MJXc-Node-51" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span></span></span></span><span class="mjx-op"><span id="MJXc-Node-43" class="mjx-mo"><span class="mjx-char MJXc-TeX-size2-R" style="padding-top: 0.755em; padding-bottom: 0.755em;">&#8721;</span></span></span></span></span></span><span class="mjx-row"><span class="mjx-under" style="font-size: 70.7%; padding-top: 0.236em; padding-bottom: 0.141em; padding-left: 0.199em;"><span id="MJXc-Node-44" class="mjx-texatom" style=""><span id="MJXc-Node-45" class="mjx-mrow"><span id="MJXc-Node-46" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">k</span></span><span id="MJXc-Node-47" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-48" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span></span></span></span></span></span></span><span id="MJXc-Node-52" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-53" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-54" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">k</span></span><span id="MJXc-Node-55" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span><span id="MJXc-Node-56" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.35em;">.</span></span></span></span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi>j</mi><mo>&#8722;</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow></mfrac><munderover><mo>&#8721;</mo><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>=</mo><mi>i</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>j</mi></mrow></munderover><mi>A</mi><mo stretchy="false">[</mo><mi>k</mi><mo stretchy="false">]</mo><mo>.</mo></math></span></span></span><script type="math/tex; mode=display" id="MathJax-Element-5">
   \mbox{avg}(i,j) = \frac{1}{j-i+1} \sum_{k=i}^{j} A[k].
 </script>			   
</p>

<p>
  If we were only making a small number of queries, we would just
  compute the answers directly:
</p>
<p></p><xmp class="code">   avg(i, j)
     sum = 0
     for k = i to j
       sum = sum + A[k]
     return sum / (j - i + 1)
</xmp>
<p></p>

<p>
  The problem with this simple solution is that each query has
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-6-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-57" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-58" class="mjx-mrow"><span id="MJXc-Node-59" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-60" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-61" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-62" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-6">O(n)</script> running time.  In fact, making some assumptions about what
  we mean by a “random” query, we can show that the
  average interval length is approximately <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-7-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;/&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-63" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-64" class="mjx-mrow"><span id="MJXc-Node-65" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-66" class="mjx-texatom"><span id="MJXc-Node-67" class="mjx-mrow"><span id="MJXc-Node-68" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">/</span></span></span></span><span id="MJXc-Node-69" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.35em;">3</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-7">n/3</script> and so the average
  case running time is <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-8-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0398;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-70" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-71" class="mjx-mrow"><span id="MJXc-Node-72" class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">&#920;</span></span><span id="MJXc-Node-73" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-74" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-75" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">&#920;</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-8">\Theta(n)</script>.
</p>
<p>
  We could speed-up the query by precomputing the answers.  That is,
  we could compute <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-9-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-76" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-77" class="mjx-mrow"><span id="MJXc-Node-78" class="mjx-mstyle"><span id="MJXc-Node-79" class="mjx-mrow"><span id="MJXc-Node-80" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-81" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-82" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-83" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-84" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-85" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-9">\mbox{avg}(i, j)</script> for all valid <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-10-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-86" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-87" class="mjx-mrow"><span id="MJXc-Node-88" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-89" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-90" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-91" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-92" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-10">(i, j)</script> pairs
  and save them in a matrix.  Then a query would consist of looking-up
  the appropriate value in the matrix and returning it, which has
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-11-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0398;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-93" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-94" class="mjx-mrow"><span id="MJXc-Node-95" class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">&#920;</span></span><span id="MJXc-Node-96" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-97" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-98" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">&#920;</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-11">\Theta(1)</script> running time.  However, there are <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-12-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;/&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-99" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-100" class="mjx-mrow"><span id="MJXc-Node-101" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-102" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-103" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-104" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-105" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-106" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-107" class="mjx-texatom"><span id="MJXc-Node-108" class="mjx-mrow"><span id="MJXc-Node-109" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">/</span></span></span></span><span id="MJXc-Node-110" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-12">n(n+1)/2</script>
  possible queries, meaning distinct <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-13-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-111" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-112" class="mjx-mrow"><span id="MJXc-Node-113" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-114" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-115" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-116" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-117" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-13">(i, j)</script> pairs, so the
  precomputation would have a running time of

  <span class="MathJax_Preview" style="color: inherit;"></span><span class="mjx-chtml MJXc-display" style="text-align: center;"><span id="MathJax-Element-14-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-118" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-119" class="mjx-mrow"><span id="MJXc-Node-120" class="mjx-mfrac"><span class="mjx-box MJXc-stacked" style="width: 3.9em; padding: 0px 0.12em;"><span class="mjx-numerator" style="width: 3.9em; top: -1.541em;"><span id="MJXc-Node-121" class="mjx-mrow"><span id="MJXc-Node-122" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-123" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-124" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-125" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-126" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-127" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="mjx-denominator" style="width: 3.9em; bottom: -0.711em;"><span id="MJXc-Node-128" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span></span><span class="mjx-line" style="border-bottom: 1.3px solid; top: -0.286em; width: 3.9em;"></span></span><span class="mjx-vsize" style="height: 2.252em; vertical-align: -0.711em;"></span></span><span id="MJXc-Node-129" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.292em;">&#8901;</span></span><span id="MJXc-Node-130" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-131" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-132" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-133" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-134" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-135" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-136" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-137" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-138" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.584em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-139" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.35em;">3</span></span></span></span><span id="MJXc-Node-140" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-141" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.35em;">.</span></span></span></span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><mo>&#8901;</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo><mo>.</mo></math></span></span></span><script type="math/tex; mode=display" id="MathJax-Element-14">
  \frac{n(n+1)}{2} \cdot O(n) = O(n^3).
  </script>
  
  It is not too difficult to show that this method is actually
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-15-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0398;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-142" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-143" class="mjx-mrow"><span id="MJXc-Node-144" class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">&#920;</span></span><span id="MJXc-Node-145" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-146" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-147" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-148" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.35em;">3</span></span></span></span><span id="MJXc-Node-149" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-150" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.35em;">.</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">&#920;</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo><mo>.</mo></math></span></span><script type="math/tex" id="MathJax-Element-15">\Theta(n^3).</script>
</p>

<h3>Variant 1: Dynamic Programming</h3>

<p>
  <em>Dynamic Programming</em> is a algorithmic design techniques that
  is taught in Algorithms.  For this problem, all you need to know is
  that there is a simple mathematical observations that allows us to
  precompute the <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-16-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-151" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-152" class="mjx-mrow"><span id="MJXc-Node-153" class="mjx-mstyle"><span id="MJXc-Node-154" class="mjx-mrow"><span id="MJXc-Node-155" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-156" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-157" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-158" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-159" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-160" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-16">\mbox{avg}(i,j)</script> values more quickly.  It is a
  fairly simple observation.  Suppose I have already computed
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-17-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-161" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-162" class="mjx-mrow"><span id="MJXc-Node-163" class="mjx-mstyle"><span id="MJXc-Node-164" class="mjx-mrow"><span id="MJXc-Node-165" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-166" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-167" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-168" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-169" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-170" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-17">\mbox{avg}(i,j)</script> and want to calculate <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-18-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-171" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-172" class="mjx-mrow"><span id="MJXc-Node-173" class="mjx-mstyle"><span id="MJXc-Node-174" class="mjx-mrow"><span id="MJXc-Node-175" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-176" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-177" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-178" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-179" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-180" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-181" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-182" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-18">\mbox{avg}(i,j+1)</script>
  next; I can do this with a simple <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-19-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-183" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-184" class="mjx-mrow"><span id="MJXc-Node-185" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-186" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-187" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-188" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-19">O(1)</script> update:

  <span class="MathJax_Preview" style="color: inherit;"></span><span class="mjx-chtml MJXc-display" style="text-align: center;"><span id="MathJax-Element-20-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mrow&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-189" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-190" class="mjx-mrow"><span id="MJXc-Node-191" class="mjx-mstyle"><span id="MJXc-Node-192" class="mjx-mrow"><span id="MJXc-Node-193" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-194" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-195" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-196" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-197" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-198" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-199" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-200" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-201" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-202" class="mjx-mfrac MJXc-space3"><span class="mjx-box MJXc-stacked" style="width: 3.902em; padding: 0px 0.12em;"><span class="mjx-numerator" style="width: 3.902em; top: -1.368em;"><span id="MJXc-Node-203" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span><span class="mjx-denominator" style="width: 3.902em; bottom: -0.915em;"><span id="MJXc-Node-204" class="mjx-mrow"><span id="MJXc-Node-205" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-206" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-207" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-208" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-209" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span></span></span><span class="mjx-line" style="border-bottom: 1.3px solid; top: -0.286em; width: 3.902em;"></span></span><span class="mjx-vsize" style="height: 2.282em; vertical-align: -0.915em;"></span></span><span id="MJXc-Node-210" class="mjx-mrow"><span id="MJXc-Node-211" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-212" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-213" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-214" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-215" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-216" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-217" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-218" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-219" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.292em;">&#8901;</span></span><span id="MJXc-Node-220" class="mjx-mstyle MJXc-space2"><span id="MJXc-Node-221" class="mjx-mrow"><span id="MJXc-Node-222" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-223" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-224" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-225" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-226" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-227" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-228" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-229" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-230" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-231" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-232" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-233" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-234" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span><span id="MJXc-Node-235" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span></span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi>j</mi><mo>&#8722;</mo><mi>i</mi><mo>+</mo><mn>2</mn></mrow></mfrac><mrow><mo>(</mo><mo stretchy="false">(</mo><mi>j</mi><mo>&#8722;</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>&#8901;</mo><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>)</mo></mrow></math></span></span></span><script type="math/tex; mode=display" id="MathJax-Element-20">
  \mbox{avg}(i, j+1) = \frac{1}{j-i+2}\left((j-i+1)\cdot\mbox{avg}(i, j) + A[j+1]\right)
  </script>
</p>

<p>
  Why does this work?  Look back at the definition of <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-21-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-236" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-237" class="mjx-mrow"><span id="MJXc-Node-238" class="mjx-mstyle"><span id="MJXc-Node-239" class="mjx-mrow"><span id="MJXc-Node-240" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-241" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-242" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-243" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-244" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-245" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-21">\mbox{avg}(i,
  j)</script>, and subsitute it into the expression:

  <span class="MathJax_Preview" style="color: inherit;"></span><span class="mjx-chtml MJXc-display" style="text-align: center;"><span id="MathJax-Element-22-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mrow&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;munderover&gt;&lt;mo&gt;&amp;#x2211;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/munderover&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;munderover&gt;&lt;mo&gt;&amp;#x2211;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/munderover&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-246" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-247" class="mjx-mrow"><span id="MJXc-Node-248" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-249" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-250" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-251" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-252" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-253" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-254" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-255" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.292em;">&#8901;</span></span><span id="MJXc-Node-256" class="mjx-mstyle MJXc-space2"><span id="MJXc-Node-257" class="mjx-mrow"><span id="MJXc-Node-258" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-259" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-260" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-261" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-262" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-263" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-264" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-265" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-266" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-267" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-268" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-269" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-270" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-271" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-272" class="mjx-mfrac"><span class="mjx-box MJXc-stacked" style="width: 3.902em; padding: 0px 0.12em;"><span class="mjx-numerator" style="width: 3.902em; top: -1.368em;"><span id="MJXc-Node-273" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span><span class="mjx-denominator" style="width: 3.902em; bottom: -0.915em;"><span id="MJXc-Node-274" class="mjx-mrow"><span id="MJXc-Node-275" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-276" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-277" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-278" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-279" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span></span><span class="mjx-line" style="border-bottom: 1.3px solid; top: -0.286em; width: 3.902em;"></span></span><span class="mjx-vsize" style="height: 2.282em; vertical-align: -0.915em;"></span></span><span id="MJXc-Node-280" class="mjx-munderover MJXc-space1"><span class="mjx-itable"><span class="mjx-row"><span class="mjx-cell"><span class="mjx-stack"><span class="mjx-over" style="font-size: 70.7%; padding-bottom: 0.157em; padding-top: 0.141em; padding-left: 0.815em;"><span id="MJXc-Node-287" class="mjx-texatom" style=""><span id="MJXc-Node-288" class="mjx-mrow"><span id="MJXc-Node-289" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span></span></span></span><span class="mjx-op"><span id="MJXc-Node-281" class="mjx-mo"><span class="mjx-char MJXc-TeX-size2-R" style="padding-top: 0.755em; padding-bottom: 0.755em;">&#8721;</span></span></span></span></span></span><span class="mjx-row"><span class="mjx-under" style="font-size: 70.7%; padding-top: 0.236em; padding-bottom: 0.141em; padding-left: 0.199em;"><span id="MJXc-Node-282" class="mjx-texatom" style=""><span id="MJXc-Node-283" class="mjx-mrow"><span id="MJXc-Node-284" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">k</span></span><span id="MJXc-Node-285" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-286" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span></span></span></span></span></span></span><span id="MJXc-Node-290" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-291" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-292" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">k</span></span><span id="MJXc-Node-293" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span><span id="MJXc-Node-294" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-295" class="mjx-munderover MJXc-space3"><span class="mjx-itable"><span class="mjx-row"><span class="mjx-cell"><span class="mjx-stack"><span class="mjx-over" style="font-size: 70.7%; padding-bottom: 0.157em; padding-top: 0.141em; padding-left: 0.815em;"><span id="MJXc-Node-302" class="mjx-texatom" style=""><span id="MJXc-Node-303" class="mjx-mrow"><span id="MJXc-Node-304" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span></span></span></span><span class="mjx-op"><span id="MJXc-Node-296" class="mjx-mo"><span class="mjx-char MJXc-TeX-size2-R" style="padding-top: 0.755em; padding-bottom: 0.755em;">&#8721;</span></span></span></span></span></span><span class="mjx-row"><span class="mjx-under" style="font-size: 70.7%; padding-top: 0.236em; padding-bottom: 0.141em; padding-left: 0.199em;"><span id="MJXc-Node-297" class="mjx-texatom" style=""><span id="MJXc-Node-298" class="mjx-mrow"><span id="MJXc-Node-299" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">k</span></span><span id="MJXc-Node-300" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-301" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span></span></span></span></span></span></span><span id="MJXc-Node-305" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-306" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-307" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">k</span></span><span id="MJXc-Node-308" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span><span id="MJXc-Node-309" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.35em;">.</span></span></span></span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo stretchy="false">(</mo><mi>j</mi><mo>&#8722;</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>&#8901;</mo><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>j</mi><mo>&#8722;</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mfrac><mn>1</mn><mrow><mi>j</mi><mo>&#8722;</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow></mfrac><munderover><mo>&#8721;</mo><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>=</mo><mi>i</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>j</mi></mrow></munderover><mi>A</mi><mo stretchy="false">[</mo><mi>k</mi><mo stretchy="false">]</mo><mo>=</mo><munderover><mo>&#8721;</mo><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>=</mo><mi>i</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>j</mi></mrow></munderover><mi>A</mi><mo stretchy="false">[</mo><mi>k</mi><mo stretchy="false">]</mo><mo>.</mo></math></span></span></span><script type="math/tex; mode=display" id="MathJax-Element-22">
  (j-i+1)\cdot \mbox{avg}(i, j) = (j-i+1) \frac{1}{j-i+1} \sum_{k=i}^{j} A[k]
   = \sum_{k=i}^{j} A[k].
  </script>

  That is, <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-23-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-310" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-311" class="mjx-mrow"><span id="MJXc-Node-312" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-313" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-314" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-315" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-316" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-317" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-318" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-319" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.292em;">&#8901;</span></span><span id="MJXc-Node-320" class="mjx-mstyle MJXc-space2"><span id="MJXc-Node-321" class="mjx-mrow"><span id="MJXc-Node-322" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-323" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-324" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-325" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-326" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-327" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>j</mi><mo>&#8722;</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>&#8901;</mo><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-23">(j-i+1)\cdot\mbox{avg}(i, j)</script> is just the sum of the
  elements of <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-24-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-328" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-329" class="mjx-mrow"><span id="MJXc-Node-330" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-24">A</script> from index <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-25-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-331" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-332" class="mjx-mrow"><span id="MJXc-Node-333" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-25">i</script> to index <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-26-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-334" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-335" class="mjx-mrow"><span id="MJXc-Node-336" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi></math></span></span><script type="math/tex" id="MathJax-Element-26">j</script>, and adding
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-27-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-337" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-338" class="mjx-mrow"><span id="MJXc-Node-339" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-340" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-341" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-342" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-343" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-344" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo stretchy="false">[</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-27">A[j+1]</script> gives us the sum of the elements from <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-28-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-345" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-346" class="mjx-mrow"><span id="MJXc-Node-347" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-28">i</script> to <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-29-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-348" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-349" class="mjx-mrow"><span id="MJXc-Node-350" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-351" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-352" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-29">j+1</script>.
  Since there are now <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-30-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-353" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-354" class="mjx-mrow"><span id="MJXc-Node-355" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-356" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-357" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-358" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-359" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi><mo>&#8722;</mo><mi>i</mi><mo>+</mo><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-30">j-i+2</script> elements being summed, we divide by
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-31-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-360" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-361" class="mjx-mrow"><span id="MJXc-Node-362" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-363" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-364" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-365" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-366" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi><mo>&#8722;</mo><mi>i</mi><mo>+</mo><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-31">j-i+2</script> to turn the sum into the average.
</p>

<p>
  We can use this to precompute all possible queries.  Start with
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-32-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-367" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-368" class="mjx-mrow"><span id="MJXc-Node-369" class="mjx-mstyle"><span id="MJXc-Node-370" class="mjx-mrow"><span id="MJXc-Node-371" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-372" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-373" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span><span id="MJXc-Node-374" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-375" class="mjx-mn MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span><span id="MJXc-Node-376" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>0</mn><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-32">\mbox{avg}(0, 0)</script>, which is just <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-33-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-377" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-378" class="mjx-mrow"><span id="MJXc-Node-379" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-380" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-381" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span><span id="MJXc-Node-382" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-33">A[0]</script>.  Calculate
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-34-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-383" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-384" class="mjx-mrow"><span id="MJXc-Node-385" class="mjx-mstyle"><span id="MJXc-Node-386" class="mjx-mrow"><span id="MJXc-Node-387" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-388" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-389" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span><span id="MJXc-Node-390" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-391" class="mjx-mn MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-392" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-34">\mbox{avg}(0, 1)</script> by applying the updated procedure.  Apply the
  update procedure to <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-35-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-393" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-394" class="mjx-mrow"><span id="MJXc-Node-395" class="mjx-mstyle"><span id="MJXc-Node-396" class="mjx-mrow"><span id="MJXc-Node-397" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-398" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-399" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span><span id="MJXc-Node-400" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-401" class="mjx-mn MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-402" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-35">\mbox{avg}(0, 1)</script> to calculate
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-36-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-403" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-404" class="mjx-mrow"><span id="MJXc-Node-405" class="mjx-mstyle"><span id="MJXc-Node-406" class="mjx-mrow"><span id="MJXc-Node-407" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-408" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-409" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span><span id="MJXc-Node-410" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-411" class="mjx-mn MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span><span id="MJXc-Node-412" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>0</mn><mo>,</mo><mn>2</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-36">\mbox{avg}(0, 2)</script>.  Repeat until you've calculatd <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-37-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-413" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-414" class="mjx-mrow"><span id="MJXc-Node-415" class="mjx-mstyle"><span id="MJXc-Node-416" class="mjx-mrow"><span id="MJXc-Node-417" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-418" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-419" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span><span id="MJXc-Node-420" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-421" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-422" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-423" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-424" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>0</mn><mo>,</mo><mi>n</mi><mo>&#8722;</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-37">\mbox{avg}(0,
  n-1)</script>.  Now start with <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-38-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-425" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-426" class="mjx-mrow"><span id="MJXc-Node-427" class="mjx-mstyle"><span id="MJXc-Node-428" class="mjx-mrow"><span id="MJXc-Node-429" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-430" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-431" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-432" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-433" class="mjx-mn MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-434" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-435" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-436" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-437" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-438" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-439" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>1</mn><mo>,</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mi>A</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-38">\mbox{avg}(1, 1) = A[1]</script> and apply
  updates to compute <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-39-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-440" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-441" class="mjx-mrow"><span id="MJXc-Node-442" class="mjx-mstyle"><span id="MJXc-Node-443" class="mjx-mrow"><span id="MJXc-Node-444" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-445" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-446" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-447" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-448" class="mjx-mn MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span><span id="MJXc-Node-449" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-39">\mbox{avg}(1,2)</script>, etc., up to <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-40-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-450" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-451" class="mjx-mrow"><span id="MJXc-Node-452" class="mjx-mstyle"><span id="MJXc-Node-453" class="mjx-mrow"><span id="MJXc-Node-454" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-455" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-456" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-457" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-458" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-459" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-460" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-461" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>1</mn><mo>,</mo><mi>n</mi><mo>&#8722;</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-40">\mbox{avg}(1,
  n-1)</script>.  Repeat this procedure until you've precomputed all the
  values.  Be sure to save the precomputed values in an appropriate
  data structure, such as a two-dimensional array.
</p>

<p>
  Using this procedure, we compute <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-41-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-462" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-463" class="mjx-mrow"><span id="MJXc-Node-464" class="mjx-mstyle"><span id="MJXc-Node-465" class="mjx-mrow"><span id="MJXc-Node-466" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-467" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-468" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-469" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-470" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-471" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-41">\mbox{avg}(i, j)</script> for all
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-42-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-472" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-473" class="mjx-mrow"><span id="MJXc-Node-474" class="mjx-mfrac"><span class="mjx-box MJXc-stacked" style="width: 2.444em; padding: 0px 0.12em;"><span class="mjx-numerator" style="font-size: 70.7%; width: 3.456em; top: -1.651em;"><span id="MJXc-Node-475" class="mjx-mrow" style=""><span id="MJXc-Node-476" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-477" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-478" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-479" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-480" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-481" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="mjx-denominator" style="font-size: 70.7%; width: 3.456em; bottom: -0.609em;"><span id="MJXc-Node-482" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span></span><span class="mjx-line" style="border-bottom: 1.3px solid; top: -0.286em; width: 2.444em;"></span></span><span class="mjx-vsize" style="height: 1.598em; vertical-align: -0.431em;"></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-42">\frac{n(n+1)}{2}</script> <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-43-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-483" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-484" class="mjx-mrow"><span id="MJXc-Node-485" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-486" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-487" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-488" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-489" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-43">(i,j)</script> pairs.  The computation for any one
  pair is <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-44-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0398;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-490" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-491" class="mjx-mrow"><span id="MJXc-Node-492" class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">&#920;</span></span><span id="MJXc-Node-493" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-494" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-495" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">&#920;</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-44">\Theta(1)</script>, so the time to complete the precomputation is
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-45-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0398;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-496" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-497" class="mjx-mrow"><span id="MJXc-Node-498" class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">&#920;</span></span><span id="MJXc-Node-499" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-500" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-501" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-502" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span></span></span><span id="MJXc-Node-503" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">&#920;</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-45">\Theta(n^2)</script>.  Compare this to precomputation with the simple
  version, which had <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-46-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0398;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-504" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-505" class="mjx-mrow"><span id="MJXc-Node-506" class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">&#920;</span></span><span id="MJXc-Node-507" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-508" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-509" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-510" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.35em;">3</span></span></span></span><span id="MJXc-Node-511" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">&#920;</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-46">\Theta(n^3)</script> running time.
</p>

<p>
  Once the precomputation is done, a query is just a lookup into the
  matrix in which we've stored the precomputed values, a <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-47-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0398;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-512" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-513" class="mjx-mrow"><span id="MJXc-Node-514" class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">&#920;</span></span><span id="MJXc-Node-515" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-516" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-517" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">&#920;</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-47">\Theta(1)</script>
  operation.  Using Dynamic Programming (clever updating), we have
  reduced the precomputation time to <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-48-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0398;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-518" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-519" class="mjx-mrow"><span id="MJXc-Node-520" class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">&#920;</span></span><span id="MJXc-Node-521" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-522" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-523" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-524" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span></span></span><span id="MJXc-Node-525" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">&#920;</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-48">\Theta(n^2)</script> and retained a
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-49-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0398;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-526" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-527" class="mjx-mrow"><span id="MJXc-Node-528" class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">&#920;</span></span><span id="MJXc-Node-529" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-530" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-531" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">&#920;</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-49">\Theta(1)</script> query time.
</p>

<h3>Variant 2: Block Decomposition</h3>

<style>
  table#t01 {
      border: 1px solid black;
      border-collapse: collapse;
  }
  th#t01 {
      border: 1px solid black;
      border-collapse: collapse;
      background-color: lightgrey;
      text-align: center;
  }
  td#t01 {
      border: 1px solid black;
      border-collapse: collapse;
      text-align: center;
  }
</style>

<p>
  The simplest way to describe block decomposition is to look an an
  example.  The table below contains a 15-long array in the middle
  row; the top row contains the indices into the array.  In the bottom
  row, we have computed the average of each three-element block from
  the data array. That is, the first element of the bottom row, 36,
  is the average of 34, 16, and 58, etc. The data values were chosen
  so that the averages would be integers, but this will not be the
  case in general.
</p>

<table id="t01">
  <tbody><tr>
    <th id="t01">0</th>
    <th id="t01">1</th>
    <th id="t01">2</th>
    <th id="t01">3</th>
    <th id="t01">4</th>
    <th id="t01">5</th>
    <th id="t01">6</th>
    <th id="t01">7</th>
    <th id="t01">8</th>
    <th id="t01">9</th>
    <th id="t01">10</th>
    <th id="t01">11</th>
    <th id="t01">12</th>
    <th id="t01">13</th>
    <th id="t01">14</th>
  </tr>
  <tr>
    <td id="t01">34</td>
    <td id="t01">16</td>
    <td id="t01">58</td>
    <td id="t01">-24</td>
    <td id="t01">53</td>
    <td id="t01">7</td>
    <td id="t01">97</td>
    <td id="t01">92</td>
    <td id="t01">-12</td>
    <td id="t01">45</td>
    <td id="t01">9</td>
    <td id="t01">0</td>
    <td id="t01">-1</td>
    <td id="t01">20</td>
    <td id="t01">77</td>
  </tr>
  <tr>
    <td id="t01" colspan="3" style="text-align: center;">36</td>
    <td id="t01" colspan="3" style="text-align: center;">12</td>
    <td id="t01" colspan="3" style="text-align: center;">59</td>
    <td id="t01" colspan="3" style="text-align: center;">18</td>
    <td id="t01" colspan="3" style="text-align: center;">32</td>
  </tr>
</tbody></table>

<p>
  How would we evaluate a query with this data structure?  If the
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-50-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-532" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-533" class="mjx-mrow"><span id="MJXc-Node-534" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-535" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-536" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-537" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-538" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-50">(i, j)</script> pair corresponds to one of the blocks, the query is a
  simple lookup.  Using the example, <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-51-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;6&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;8&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-539" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-540" class="mjx-mrow"><span id="MJXc-Node-541" class="mjx-mstyle"><span id="MJXc-Node-542" class="mjx-mrow"><span id="MJXc-Node-543" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-544" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-545" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">6</span></span><span id="MJXc-Node-546" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-547" class="mjx-mn MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">8</span></span><span id="MJXc-Node-548" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>6</mn><mo>,</mo><mn>8</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-51">\mbox{avg}(6,8)</script> would simply
  return 59, the precomputed average for the third block.
</p>

<p>
  If the query corresponds to multiple full blocks, this is only
  slightly harder.  For <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-52-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;8&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-549" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-550" class="mjx-mrow"><span id="MJXc-Node-551" class="mjx-mstyle"><span id="MJXc-Node-552" class="mjx-mrow"><span id="MJXc-Node-553" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-554" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-555" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.35em;">3</span></span><span id="MJXc-Node-556" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-557" class="mjx-mn MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">8</span></span><span id="MJXc-Node-558" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>3</mn><mo>,</mo><mn>8</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-52">\mbox{avg}(3,8)</script>, we would need to return
  the average of the second and third blocks.  Since the blocks are
  the same size, we can sum the blocks and divide by two: <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-53-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;12&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;59&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;/&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;35.5.&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-559" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-560" class="mjx-mrow"><span id="MJXc-Node-561" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-562" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">12</span></span><span id="MJXc-Node-563" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-564" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">59</span></span><span id="MJXc-Node-565" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-566" class="mjx-texatom"><span id="MJXc-Node-567" class="mjx-mrow"><span id="MJXc-Node-568" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">/</span></span></span></span><span id="MJXc-Node-569" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span><span id="MJXc-Node-570" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-571" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">35.5.</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mn>12</mn><mo>+</mo><mn>59</mn><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>2</mn><mo>=</mo><mn>35.5.</mn></math></span></span><script type="math/tex" id="MathJax-Element-53"> (12 + 59)
  / 2 = 35.5.</script> In general, we would sum the blocks and divide by the
  number of blocks.  However, there is a situation, discussed later,
  in which this is not quite correct.
</p>

<p>
  Unfortunately, many queries will not align with the block structure.
  For those, we need to do more work.  Let <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-54-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-572" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-573" class="mjx-mrow"><span id="MJXc-Node-574" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-575" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">b</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-576" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span></span></span><span id="MJXc-Node-577" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-578" class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span id="MJXc-Node-579" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">b</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-580" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span></span><span id="MJXc-Node-581" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-582" class="mjx-mo MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.35em;">…</span></span><span id="MJXc-Node-583" class="mjx-mo MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-584" class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span id="MJXc-Node-585" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">b</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-586" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">4</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>b</mi><mn>0</mn></msub><mo>,</mo><msub><mi>b</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>b</mi><mn>4</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-54">b_0, b_1, \ldots, b_4</script>
  denote the five block averages.  Suppose we wish to query
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-55-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-587" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-588" class="mjx-mrow"><span id="MJXc-Node-589" class="mjx-mstyle"><span id="MJXc-Node-590" class="mjx-mrow"><span id="MJXc-Node-591" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-592" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-593" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span><span id="MJXc-Node-594" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-595" class="mjx-mn MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">10</span></span><span id="MJXc-Node-596" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>2</mn><mo>,</mo><mn>10</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-55">\mbox{avg}(2,10)</script>.  The answer will involve two block averages
  (<span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-56-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-597" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-598" class="mjx-mrow"><span id="MJXc-Node-599" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-600" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">b</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-601" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span></span><span id="MJXc-Node-602" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-603" class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span id="MJXc-Node-604" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">b</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-605" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span></span></span><span id="MJXc-Node-606" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>b</mi><mn>1</mn></msub><mo>,</mo><msub><mi>b</mi><mn>2</mn></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-56">b_1, b_2)</script> and data from two partial blocks (the first and
  fourth).  For this example, we would first compute the <em>sum</em>
  of the elements <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-57-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-607" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-608" class="mjx-mrow"><span id="MJXc-Node-609" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-610" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-611" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span><span id="MJXc-Node-612" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span><span id="MJXc-Node-613" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-614" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-615" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-616" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.35em;">3</span></span><span id="MJXc-Node-617" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span><span id="MJXc-Node-618" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-619" class="mjx-mo MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.35em;">…</span></span><span id="MJXc-Node-620" class="mjx-mo MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-621" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-622" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-623" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">10</span></span><span id="MJXc-Node-624" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>,</mo><mi>A</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>,</mo><mo>…</mo><mo>,</mo><mi>A</mi><mo stretchy="false">[</mo><mn>10</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-57">A[2], A[3], \ldots, A[10]</script> as follows:

  <span class="MathJax_Preview" style="color: inherit;"></span><span class="mjx-chtml MJXc-display" style="text-align: center;"><span id="MathJax-Element-58-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;blocksize&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;blocksize&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-625" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-626" class="mjx-mrow"><span id="MJXc-Node-627" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-628" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-629" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span><span id="MJXc-Node-630" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span><span id="MJXc-Node-631" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-632" class="mjx-mstyle MJXc-space2"><span id="MJXc-Node-633" class="mjx-mrow"><span id="MJXc-Node-634" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">blocksize</span></span></span></span><span id="MJXc-Node-635" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.292em;">&#8901;</span></span><span id="MJXc-Node-636" class="mjx-msubsup MJXc-space2"><span class="mjx-base"><span id="MJXc-Node-637" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">b</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-638" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span></span><span id="MJXc-Node-639" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-640" class="mjx-mstyle MJXc-space2"><span id="MJXc-Node-641" class="mjx-mrow"><span id="MJXc-Node-642" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">blocksize</span></span></span></span><span id="MJXc-Node-643" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.292em;">&#8901;</span></span><span id="MJXc-Node-644" class="mjx-msubsup MJXc-space2"><span class="mjx-base"><span id="MJXc-Node-645" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">b</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-646" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span></span></span><span id="MJXc-Node-647" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-648" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-649" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-650" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">9</span></span><span id="MJXc-Node-651" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span><span id="MJXc-Node-652" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-653" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">A</span></span><span id="MJXc-Node-654" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">[</span></span><span id="MJXc-Node-655" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">10</span></span><span id="MJXc-Node-656" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">]</span></span></span></span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>A</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>+</mo><mstyle displaystyle="false" scriptlevel="0"><mtext>blocksize</mtext></mstyle><mo>&#8901;</mo><msub><mi>b</mi><mn>1</mn></msub><mo>+</mo><mstyle displaystyle="false" scriptlevel="0"><mtext>blocksize</mtext></mstyle><mo>&#8901;</mo><msub><mi>b</mi><mn>2</mn></msub><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>9</mn><mo stretchy="false">]</mo><mo>+</mo><mi>A</mi><mo stretchy="false">[</mo><mn>10</mn><mo stretchy="false">]</mo></math></span></span></span><script type="math/tex; mode=display" id="MathJax-Element-58">
  A[2] + \mbox{blocksize}\cdot b_1 + \mbox{blocksize}\cdot b_2 + A[9] + A[10]
  </script>

  which for the example data is <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-59-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;58&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mn&gt;12&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mn&gt;59&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;45&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;325.&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-657" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-658" class="mjx-mrow"><span id="MJXc-Node-659" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">58</span></span><span id="MJXc-Node-660" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-661" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.35em;">3</span></span><span id="MJXc-Node-662" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.292em;">&#8901;</span></span><span id="MJXc-Node-663" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">12</span></span><span id="MJXc-Node-664" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-665" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.35em;">3</span></span><span id="MJXc-Node-666" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.292em;">&#8901;</span></span><span id="MJXc-Node-667" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">59</span></span><span id="MJXc-Node-668" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-669" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">45</span></span><span id="MJXc-Node-670" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-671" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">9</span></span><span id="MJXc-Node-672" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-673" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">325.</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>58</mn><mo>+</mo><mn>3</mn><mo>&#8901;</mo><mn>12</mn><mo>+</mo><mn>3</mn><mo>&#8901;</mo><mn>59</mn><mo>+</mo><mn>45</mn><mo>+</mo><mn>9</mn><mo>=</mo><mn>325.</mn></math></span></span><script type="math/tex" id="MathJax-Element-59">58 + 3\cdot 12 + 3 \cdot 59 + 45 + 9
  = 325.</script>  To find the average, divide by the number of elements:

  <span class="MathJax_Preview" style="color: inherit;"></span><span class="mjx-chtml MJXc-display" style="text-align: center;"><span id="MathJax-Element-60-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;325&lt;/mn&gt;&lt;mrow&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;325&lt;/mn&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/mfrac&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;36.1111.&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-674" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-675" class="mjx-mrow"><span id="MJXc-Node-676" class="mjx-mstyle"><span id="MJXc-Node-677" class="mjx-mrow"><span id="MJXc-Node-678" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.177em; padding-bottom: 0.524em;">avg</span></span></span></span><span id="MJXc-Node-679" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-680" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span><span id="MJXc-Node-681" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span><span id="MJXc-Node-682" class="mjx-mn MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">10</span></span><span id="MJXc-Node-683" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-684" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-685" class="mjx-mfrac MJXc-space3"><span class="mjx-box MJXc-stacked" style="width: 4.645em; padding: 0px 0.12em;"><span class="mjx-numerator" style="width: 4.645em; top: -1.368em;"><span id="MJXc-Node-686" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">325</span></span></span><span class="mjx-denominator" style="width: 4.645em; bottom: -0.793em;"><span id="MJXc-Node-687" class="mjx-mrow"><span id="MJXc-Node-688" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">10</span></span><span id="MJXc-Node-689" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-690" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span><span id="MJXc-Node-691" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">+</span></span><span id="MJXc-Node-692" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span></span><span class="mjx-line" style="border-bottom: 1.3px solid; top: -0.286em; width: 4.645em;"></span></span><span class="mjx-vsize" style="height: 2.16em; vertical-align: -0.793em;"></span></span><span id="MJXc-Node-693" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-694" class="mjx-mfrac MJXc-space3"><span class="mjx-box MJXc-stacked" style="width: 1.7em; padding: 0px 0.12em;"><span class="mjx-numerator" style="width: 1.7em; top: -1.368em;"><span id="MJXc-Node-695" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">325</span></span></span><span class="mjx-denominator" style="width: 1.7em; bottom: -0.733em;"><span id="MJXc-Node-696" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">9</span></span></span><span class="mjx-line" style="border-bottom: 1.3px solid; top: -0.286em; width: 1.7em;"></span></span><span class="mjx-vsize" style="height: 2.1em; vertical-align: -0.733em;"></span></span><span id="MJXc-Node-697" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.061em; padding-bottom: 0.292em;">=</span></span><span id="MJXc-Node-698" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">36.1111.</span></span></span></span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mstyle displaystyle="false" scriptlevel="0"><mtext>avg</mtext></mstyle><mo stretchy="false">(</mo><mn>2</mn><mo>,</mo><mn>10</mn><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>325</mn><mrow><mn>10</mn><mo>&#8722;</mo><mn>2</mn><mo>+</mo><mn>1</mn></mrow></mfrac><mo>=</mo><mfrac><mn>325</mn><mn>9</mn></mfrac><mo>=</mo><mn>36.1111.</mn></math></span></span></span><script type="math/tex; mode=display" id="MathJax-Element-60">
  \mbox{avg}(2,10) = \frac{325}{10-2+1} = \frac{325}{9} = 36.1111.
  </script>
</p>

<p>
  <b>Warning:</b> In our example, all our blocks are the same size,
  but in many cases the last block will be smaller.  For example, if
  our data array has size 17, there is no way to divide it into blocks
  of equal size.  We could divide 17 into five blocks of three and a
  final blocks of size 2, or four blocks of size four with a final
  block of size one.  In either case, the last block is a different
  size.  You will have to handle this correctly in your code!
</p>

<p>
  How efficient is the block approach?  Precomputing the block
  averages can be done in <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-61-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0398;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-699" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-700" class="mjx-mrow"><span id="MJXc-Node-701" class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">&#920;</span></span><span id="MJXc-Node-702" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-703" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-704" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">&#920;</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-61">\Theta(n)</script> time, using a single pass
  through the data array.  The running time of the query method
  depends on the chosen block size.  It turns out that the optimal
  block size is approximately <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-62-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msqrt&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msqrt&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-705" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-706" class="mjx-mrow"><span id="MJXc-Node-707" class="mjx-msqrt"><span class="mjx-box" style="padding-top: 0.045em;"><span class="mjx-surd"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.524em; padding-bottom: 0.524em;">&#8730;</span></span><span class="mjx-box" style="padding-top: 0.236em; border-top: 1.3px solid;"><span id="MJXc-Node-708" class="mjx-mrow"><span id="MJXc-Node-709" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span></span></span></span><span id="MJXc-Node-710" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.524em;">,</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msqrt><mi>n</mi></msqrt><mo>,</mo></math></span></span><script type="math/tex" id="MathJax-Element-62">\sqrt{n},</script> resulting in a
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-63-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msqrt&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msqrt&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-711" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-712" class="mjx-mrow"><span id="MJXc-Node-713" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-714" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-715" class="mjx-msqrt"><span class="mjx-box" style="padding-top: 0.045em;"><span class="mjx-surd"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.524em; padding-bottom: 0.524em;">&#8730;</span></span><span class="mjx-box" style="padding-top: 0.236em; border-top: 1.3px solid;"><span id="MJXc-Node-716" class="mjx-mrow"><span id="MJXc-Node-717" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span></span></span></span><span id="MJXc-Node-718" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-63">O(\sqrt{n})</script> running time.
</p>

<h3>Summary</h3>

<p>
  We've discussed four methods for computing Range Average Queries,
  each with different precomputation and query running times:
  </p><ol>
    <li>
      No precomputation.  Write a function that computes a query with
      no precomputation.  The query running time is <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-64-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-719" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-720" class="mjx-mrow"><span id="MJXc-Node-721" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-722" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-723" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-724" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-64">O(n)</script>, but
      there is <em>no</em> precomputation.  If we have to make a lot
      of queries, this becomes infefficient.
    </li>
    <li>
      Simple precomputation.  Use our function from (1) to precompute
      all possible queries and save them in a two-dimensional array.
      The time to build the array is <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-65-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-725" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-726" class="mjx-mrow"><span id="MJXc-Node-727" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-728" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-729" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-730" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-731" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.35em;">3</span></span></span></span><span id="MJXc-Node-732" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-65">O(n^3)</script>, but the query time
      is <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-66-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-733" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-734" class="mjx-mrow"><span id="MJXc-Node-735" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-736" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-737" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-738" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-739" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.35em;">.</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>.</mo></math></span></span><script type="math/tex" id="MathJax-Element-66">O(1).</script>
    </li>
    <li>
      Dynamic Programming (Variant 1).  By thinking a little bit about
      how the precomputation is done, we reduce the precomputation
      time to <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-67-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-740" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-741" class="mjx-mrow"><span id="MJXc-Node-742" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-743" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-744" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-745" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-746" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">2</span></span></span></span><span id="MJXc-Node-747" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-67">O(n^2)</script> and retain the <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-68-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-748" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-749" class="mjx-mrow"><span id="MJXc-Node-750" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-751" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-752" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-753" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-68">O(1)</script> query running time.
    </li>
    <li>
      Block Decomposition (Variant 2).  By breaking the problem into a
      number of smaller problems (blocks), we reduce the
      precomputation to <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-69-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-754" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-755" class="mjx-mrow"><span id="MJXc-Node-756" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-757" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-758" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-759" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-69">O(n)</script>, but the query running time increases
      to <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-70-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msqrt&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msqrt&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-760" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-761" class="mjx-mrow"><span id="MJXc-Node-762" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-763" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-764" class="mjx-msqrt"><span class="mjx-box" style="padding-top: 0.045em;"><span class="mjx-surd"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.524em; padding-bottom: 0.524em;">&#8730;</span></span><span class="mjx-box" style="padding-top: 0.236em; border-top: 1.3px solid;"><span id="MJXc-Node-765" class="mjx-mrow"><span id="MJXc-Node-766" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span></span></span></span><span id="MJXc-Node-767" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span><span id="MJXc-Node-768" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.35em;">.</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo><mo>.</mo></math></span></span><script type="math/tex" id="MathJax-Element-70">O(\sqrt{n}).</script>
    </li>
  </ol>
  There are more complex methods that give different combinations of
  running times for the precomputation and queries.  One approach,
  which utilizes a type of binary tree called a <em>Cartesian
  Tree</em>, gives <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-71-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-769" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-770" class="mjx-mrow"><span id="MJXc-Node-771" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-772" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-773" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-774" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-71">O(n)</script> time for precomputation and <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-72-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-775" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-776" class="mjx-mrow"><span id="MJXc-Node-777" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">O</span></span><span id="MJXc-Node-778" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">(</span></span><span id="MJXc-Node-779" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span><span id="MJXc-Node-780" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-72">O(1)</script>
  queries.  Cartesian Trees will be the subject of Project 3.
<p></p>

<hr>
<h2>Assignment</h2>

<p>
  Your assignment is to implement the Dynamic Programming and Block
  Decomposition methods for Range Average Queries.  You have a lot of
  freedom in how to implement your solution — you get to decide
  what the private class variables should be — but you must
  implement the specified functions, and you must use Dynamic
  Programming and Block Decomposition.
</p>
<p>
  For this project, you are only provided with a skeleton <tt>.h</tt>
  file and a simple test:
</p>
<ul>
  <li>
    <a href="https://userpages.umbc.edu/~cmarron/cs341.f19/projects/proj2files/raq.h"><tt>raq.h</tt></a> —
    skeleton <tt>.h</tt> file for the <tt>RAQ</tt>
    and <tt>BlockRAQ</tt> classes.
  </li>
  <li>
    <a href="https://userpages.umbc.edu/~cmarron/cs341.f19/projects/proj2files/test0.cpp"><tt>test0.cpp</tt></a> —
    a basic test program.
  </li>
  <li>
    <a href="https://userpages.umbc.edu/~cmarron/cs341.f19/projects/proj2files/test0.txt"><tt>test0.txt</tt></a> —
    sample output from <tt>test0.cpp</tt> using my implementation
    of <tt>RAQ</tt> and <tt>BlockRAQ</tt>.  Your ouput may not be
    identical, depending on how you set-up the data structures.
  </li>
</ul>

<p>
  The file <a href="https://userpages.umbc.edu/~cmarron/cs341.f19/projects/proj2files/raq.h"><tt>raq.h</tt></a> contains the
  function declarations for two classes:
  </p><ol>
    <li>
      <tt>RAQ</tt> — implements the Dynamic Programming solution
      for Range Average Queries.
    </li>
    <li>
      <tt>BlockRAQ</tt> — implements the Block Decomposition
      solution for Range Average Queries.
    </li>
  </ol>
<p></p>

<p>
  The private class variables have not been defined.  It is up to you
  to do that.  You will need some array-type variables: you may use
  C/C++ arrays, the STL <tt>vector</tt> class, or the
  STL <tt>array</tt> class.  No other STL containers or libraries are
  permitted.  Once you have decided on the class variables, you can
  implement the class methods.
</p>

<p>
  If necessary, you must implement a copy constructor, destructor, and
  assignment operator for both classes.  Whether this is necessary
  depends on your choice of class variables.
</p>
  
<p>
  Finally, you are responsible for thoroughly testing your program.
  For grading purposes, it will be tested on input arrays of varying
  sizes, including very large arrays.  Your submission will also be
  checked for memory leaks and memory errors.
</p>

<hr>
<h2>Specifications</h2>

<style>
  th {
      background-color: lightgrey;
  }
</style>

<p>
  For the <tt>RAQ</tt> class, you must declare the class variables and
  implement the following methods:
</p>

<table>
  <tbody><tr>
    <th>Method</th>
    <th>Description</th>
  </tr>
  <tr>
    <td width="40%">
      <tt>RAQ(std::vector&lt;float&gt; data)</tt>
    </td>
    <td width="60%">Creates a <tt>RAQ</tt> object from a data vector.  Performs
      precomputation for the Dynamic Programming solution.
    </td>
  </tr><tr>
    <td><tt>float query(int i, int j) const</tt>
    </td>
    <td>
      Performs a Range Average Query from index <tt>i</tt> to
      index j.  <tt>i</tt> and <tt>j</tt> must be in the
      range <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-73-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-781" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-782" class="mjx-mrow"><span id="MJXc-Node-783" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span><span id="MJXc-Node-784" class="mjx-mo MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.35em;">…</span></span><span id="MJXc-Node-785" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-786" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-787" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn><mo>…</mo><mi>n</mi><mo>&#8722;</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-73">0\ldots n-1</script> where <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-74-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-788" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-789" class="mjx-mrow"><span id="MJXc-Node-790" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-74">n</script> is the length of the data
      vector.
    </td>
  </tr>
  <tr>
    <td>
      <tt>void dump() const</tt>
    </td>
    <td>
      Print the contents of the precomputation data structure.  Must
      be formatted to be easily read, at least for small data sizes
      <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-75-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2264;&lt;/mo&gt;&lt;mn&gt;15&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-791" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-792" class="mjx-mrow"><span id="MJXc-Node-793" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-794" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.466em;">&#8804;</span></span><span id="MJXc-Node-795" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">15</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>&#8804;</mo><mn>15</mn></math></span></span><script type="math/tex" id="MathJax-Element-75">n \leq 15</script>.
    </td>
  </tr>
</tbody></table>

<p>
  For the <tt>BlockRAQ</tt> class, you must declare the class
  variables and implement the following methods:
</p>

<table>
  <tbody><tr>
    <th>Method</th>
    <th>Description</th>
  </tr>
  <tr>
    <td width="40%">
      <tt>BlockRAQ(std::vector&lt;float&gt; data)</tt>
    </td>
    <td width="60%">Creates a <tt>BlockRAQ</tt> object from a data
      vector.  Performs precomputation for the Block Decomposition
      solution.
    </td>
  </tr><tr>
    <td><tt>float query(int i, int j) const</tt>
    </td>
    <td>
      Performs a Range Average Query from index <tt>i</tt> to
      index j.  <tt>i</tt> and <tt>j</tt> must be in the
      range <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-76-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-796" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-797" class="mjx-mrow"><span id="MJXc-Node-798" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span><span id="MJXc-Node-799" class="mjx-mo MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.35em;">…</span></span><span id="MJXc-Node-800" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-801" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-802" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn><mo>…</mo><mi>n</mi><mo>&#8722;</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-76">0\ldots n-1</script> where <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-77-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-803" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-804" class="mjx-mrow"><span id="MJXc-Node-805" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-77">n</script> is the length of the data
      vector.
    </td>
  </tr>
  <tr>
    <td>
      <tt>void dump() const</tt>
    </td>
    <td>
      Print the contents of the precomputation data structure.  The
      output must include the number of blocks, block size, and the
      precomputed block averages.  Must be formatted to be easily
      read, at least for small data sizes <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-78-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2264;&lt;/mo&gt;&lt;mn&gt;15&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-806" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-807" class="mjx-mrow"><span id="MJXc-Node-808" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-809" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.466em;">&#8804;</span></span><span id="MJXc-Node-810" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">15</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>&#8804;</mo><mn>15</mn></math></span></span><script type="math/tex" id="MathJax-Element-78">n \leq 15</script>.
    </td>
  </tr>
</tbody></table>

<p>
  <b>Requirement:</b> Your implementation (<tt>.cpp</tt>) file must be
  named <tt>raq.cpp</tt>.
</p>
  
  <b>Requirement:</b> The following modifications may be made
  to <tt>raq.h</tt>: addition of <em>private</em> class variables to
  the <tt>RAQ</tt> and <tt>BlockRAQ</tt> classes; addition of a copy
  constructor, destructor, and assignment operator to either class, if
  necessary; addition of <em>private</em> helper function
  declarations.  No other changes are permitted.  In particular, you
  must not change the declaration of the required public functions
  (constructor, <tt>query</tt>, and <tt>dump</tt>).
<p></p> 

<p>
  <b>Requirement:</b> <tt>RAQ</tt> must correctly implement the
  Dynamic Programming solution.  Your code will be tested for correct
  running times, and the TAs will visually inspect your
  implementation.
</p>

<p>
  <b>Requirement:</b> <tt>BlockRAQ</tt> must correctly implement the
  Block Decomposition soution. Your code will be tested for correct
  running times, and the TAs will visually inspect your
  implementation.
</p>

<p>
  <b>Reqirement:</b> For <tt>BlockRAQ</tt>, the blocksize should be
  <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-79-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;&amp;#x230A;&lt;/mo&gt;&lt;msqrt&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msqrt&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;&amp;#x230B;&lt;/mo&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-811" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-812" class="mjx-mrow"><span id="MJXc-Node-813" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">&#8970;</span></span><span id="MJXc-Node-814" class="mjx-msqrt"><span class="mjx-box" style="padding-top: 0.045em;"><span class="mjx-surd"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.524em; padding-bottom: 0.524em;">&#8730;</span></span><span class="mjx-box" style="padding-top: 0.236em; border-top: 1.3px solid;"><span id="MJXc-Node-815" class="mjx-mrow"><span id="MJXc-Node-816" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span></span></span></span></span><span id="MJXc-Node-817" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.466em; padding-bottom: 0.582em;">&#8971;</span></span><span id="MJXc-Node-818" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.171em; padding-bottom: 0.35em;">.</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">&#8970;</mo><msqrt><mi>n</mi></msqrt><mo fence="false" stretchy="false">&#8971;</mo><mo>.</mo></math></span></span><script type="math/tex" id="MathJax-Element-79">\lfloor\sqrt{n}\rfloor.</script> This can be computed in C++
  with <tt>(int) sqrt((float) n)</tt>.
</p>

<p>
  <b>Requirement:</b> Assignments and copy constructors must function
  correctly for both classes.  You may need to implement a copy
  constructor, destructor, and assignment operator, depending on your
  choice of class variable types.
</p>

<p>
  <b>Requirement:</b> For both classes, the <tt>query</tt> function
  must throw a <tt>domain_error</tt> exception if the values
  of <tt>i</tt> or <tt>j</tt> is out-of-bounds or if <tt>j</tt> is
  less than <tt>i</tt>.  The allowed values for the indices are <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-80-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;&amp;#x2264;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;&amp;#x2264;&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;#x2264;&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1.&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-819" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-820" class="mjx-mrow"><span id="MJXc-Node-821" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">0</span></span><span id="MJXc-Node-822" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.466em;">&#8804;</span></span><span id="MJXc-Node-823" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span><span id="MJXc-Node-824" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.466em;">&#8804;</span></span><span id="MJXc-Node-825" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span><span id="MJXc-Node-826" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.35em; padding-bottom: 0.466em;">&#8804;</span></span><span id="MJXc-Node-827" class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.234em; padding-bottom: 0.292em;">n</span></span><span id="MJXc-Node-828" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.292em; padding-bottom: 0.408em;">&#8722;</span></span><span id="MJXc-Node-829" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.408em; padding-bottom: 0.35em;">1.</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn><mo>&#8804;</mo><mi>i</mi><mo>&#8804;</mo><mi>j</mi><mo>&#8804;</mo><mi>n</mi><mo>&#8722;</mo><mn>1.</mn></math></span></span><script type="math/tex" id="MathJax-Element-80">0
  \leq i \leq j \leq n-1.</script>
</p>

<p>
  <b>Requirement:</b> Your code should not have any memory leaks or
  memory errors.
</p>

<p>
  <b>Requirement:</b> Follow all coding standards as decribed on
  the <a href="https://userpages.umbc.edu/~cmarron/cs341.f19/projects/coding-standards.shtml">C++
  Coding Standards</a>.  In particular, class variable names must
  begin with “m_” or “_”.
</p>

<hr>
<h2>Test Programs</h2> 

<p>
  The following basic test program is provided; it is your
  responsibility to thoroughly test your programs.  In particular, you
  should check that your running times are reasonable for large data
  vectors.
</p>

<ul>
  <li>
    <a href="https://userpages.umbc.edu/~cmarron/cs341.f19/projects/proj2files/test0.cpp"><tt>test0.cpp</tt></a> —
    creates <tt>RAQ</tt> and <tt>BlockRAQ</tt> objects using the data
    from the example in this description.  Computes all possible
    queries and checks both implementations against a simple, direct
    computation.
  </li>
</ul>

<p>
  These and all the provided project files are available on GL:
</p><xmp>   /afs/umbc.edu/users/c/m/cmarron/pub/www/cs341.f19/projects/proj2files/
</xmp>
<p></p>


<hr>
<h2>Implementation Notes</h2> 


<ul>
  <li>
    STL containers (<tt>vector</tt>, <tt>array</tt>) already have
    destructors as well as “deep” copy constructors and
    assignment operators.  If you use STL containers for your
    array-like class variables, you can <em>probably</em> avoid having
    to write destructors, copy constructors, and assignment operators.
    If you use C/C++ arrays, created using the <tt>new</tt> operator,
    you will need to write these methods yourself.
  </li>
  <li>
    For the Block Decomposition method, you must be very careful with
    queries for which <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-81-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-830" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-831" class="mjx-mrow"><span id="MJXc-Node-832" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.292em;">i</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-81">i</script> or <span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-82-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 108%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-833" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-834" class="mjx-mrow"><span id="MJXc-Node-835" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.466em; padding-bottom: 0.466em;">j</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi></math></span></span><script type="math/tex" id="MathJax-Element-82">j</script> falls in the last block.  Since
    the block size may not divide the data size evenly, the last block
    may be smaller than the other blocks.
  </li>
</ul>

<!-- <ul> -->
<!--   <li> -->
<!--     <p> -->
<!--       In Project 1, the neighbor iterator is not required to list the -->
<!--       neighbors in any particular order.  Therefore, you cannot assume -->
<!--       that <tt>Baseline::Graph</tt> and <tt>Graph</tt> will list them -->
<!--       in the same order, so stepping both iterators and comparing the -->
<!--       values when you dereference them is not a valid test. -->
<!--     </p> -->
<!--     <p> -->
<!--       One way you might deal with this is to insert the neighbors into -->
<!--       two <tt>set</tt> containers. <tt>set</tt> stores its elements in -->
<!--       a standard order: if you iterate over two sets containing the -->
<!--       same elements, the elements will be listed in the same order. -->
<!--       For example, the code below produces the following output: -->
<!--     </p> -->
<!-- </ul> -->

<hr>
<h2>What to Submit</h2>

<p>
  You must submit the following files to the <tt>proj2</tt> directory.
</p>

<ul>
  <li> <tt>raq.h</tt> </li>
  <li> <tt>raq.cpp</tt> </li>
</ul>

<p>
  If you followed the instructions in the 
  <a href="https://userpages.umbc.edu/~cmarron/cs341.f19/projects/submission.shtml">Project Submission</a> page to set up
  your directories, you can submit your code using this Unix command:
</p>
<xmp class="code">   cp raq.h raq.cpp ~/cs341proj/proj2/</xmp>

      </div>
      <div id="footer" class="donotprint">
        <div>
          <a href="https://userpages.umbc.edu/~cmarron/cs341.f19/index.shtml">CMSC 341 — Fall 2019 </a>
        </div>
        <a href="http://www.csee.umbc.edu/">CSEE</a> |
        <a href="http://www.umbc.edu/">UMBC</a>
      </div>
    </div>



</body></html>